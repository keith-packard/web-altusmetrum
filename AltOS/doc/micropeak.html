<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="Keith Packard, Bdale Garbee">
<meta name="copyright" content="Bdale Garbee and Keith Packard 2018">
<title>MicroPeak Owner&#8217;s Manual</title>
<link rel="stylesheet" href="./am.css">
</head>
<body class="book">
<div id="header">
<h1>MicroPeak Owner&#8217;s Manual</h1>
<div class="details">
<span id="author" class="author">Keith Packard</span><br>
<span id="email" class="email"><a href="mailto:keithp@keithp.com">keithp@keithp.com</a></span><br>
<span id="author2" class="author">Bdale Garbee</span><br>
<span id="email2" class="email"><a href="mailto:bdale@gag.com">bdale@gag.com</a></span><br>
<span id="revnumber">version v1.9,</span>
<span id="revdate">8 Oct 2018</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_license">License</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a></li>
<li><a href="#_using_micropeak">1. Using MicroPeak</a></li>
<li><a href="#_the_micropeak_usb_adapter">2. The MicroPeak USB adapter</a>
<ul class="sectlevel2">
<li><a href="#_installing_the_micropeak_software">2.1. Installing the MicroPeak software</a></li>
<li><a href="#_downloading_micro_peak_data">2.2. Downloading Micro Peak data</a></li>
<li><a href="#_analyzing_micropeak_data">2.3. Analyzing MicroPeak Data</a></li>
<li><a href="#_setting_micropeak_preferences">2.4. Setting MicroPeak Preferences</a></li>
</ul>
</li>
<li><a href="#_handling_precautions">Appendix A: Handling Precautions</a></li>
<li><a href="#_technical_information">Appendix B: Technical Information</a>
<ul class="sectlevel2">
<li><a href="#_barometric_sensor">B.1. Barometric Sensor</a></li>
<li><a href="#_micro_controller">B.2. Micro-controller</a></li>
<li><a href="#_lithium_battery">B.3. Lithium Battery</a></li>
<li><a href="#_atmospheric_model">B.4. Atmospheric Model</a></li>
<li><a href="#_mechanical_considerations">B.5. Mechanical Considerations</a></li>
<li><a href="#_micropeak_programming_interface">B.6. MicroPeak Programming Interface</a></li>
</ul>
</li>
<li><a href="#_on_board_data_storage">Appendix C: On-board data storage</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div id="logo" class="imageblock">
<div class="content">
<a class="image" href="https://altusmetrum.org"><img src="altusmetrum-oneline.svg" alt="Altus Metrum"></a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copyright © 2018 Bdale Garbee and Keith Packard</p>
</div>
<div class="paragraph">
<p>This document is released under the terms of the <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons ShareAlike 3.0 License</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thanks to John Lyngdal for suggesting that we build something
like this.</p>
</div>
<div class="paragraph">
<p>Have fun using these products, and we hope to meet all of you
out on the rocket flight line somewhere.</p>
</div>
<div class="verseblock">
<pre class="content">Bdale Garbee, KB0G
NAR #87103, TRA #12201</pre>
</div>
<div class="verseblock">
<pre class="content">Keith Packard, KD7SQG
NAR #88757, TRA #12200</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_micropeak">1. Using MicroPeak</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MicroPeak is designed to be easy to use. Requiring no external
components, flying takes just a few steps</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Install the battery</dt>
<dd>
<p>Fit a CR1025 battery into the plastic carrier. The positive
(+) terminal should be towards the more open side of the
carrier. Slip the carrier into the battery holder with the
positive (+) terminal facing away from the circuit board.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="micropeak-back.jpg" alt="micropeak back" width="430">
</div>
<div class="title">Figure 1. MicroPeak and Battery</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Install MicroPeak in your rocket</dt>
<dd>
<p>This can be as simple as preparing a soft cushion of wadding
inside a vented model payload bay. Wherever you mount it,
make sure you protect the barometric sensor from corrosive
ejection gasses as those will damage the sensor, and shield
it from light as that can cause incorrect sensor readings.</p>
</dd>
<dt class="hdlist1">Turn MicroPeak on</dt>
<dd>
<p>Slide the switch so that the actuator covers the '1' printed
on the board. MicroPeak will report the maximum height of
the last flight in decimeters using a sequence of flashes on
the LED. A sequence of short flashes indicates one digit. A
single long flash indicates zero. The height is reported in
decimeters, so the last digit will be tenths of a meter. For
example, if MicroPeak reports 5 4 4 3, then the maximum
height of the last flight was 544.3m, or 1786 feet.</p>
</dd>
<dt class="hdlist1">Finish preparing the rocket for flight</dt>
<dd>
<p>After the previous flight data have been reported, MicroPeak
waits for one minute before starting to check for
launch. This gives you time to finish assembling the
rocket. As those activities might cause pressure changes
inside the airframe, MicroPeak might accidentally detect
boost. If you need to do anything to the airframe after the
one minute window passes, make sure to be careful not to
disturb the altimeter. The LED will remain dark during the
one minute delay, but after that, it will start blinking
once every 3 seconds.</p>
</dd>
<dt class="hdlist1">Fly the rocket</dt>
<dd>
<p>Once the rocket passes about 30m in height (100 feet), the
micro-controller will record the ground pressure and track
the pressure seen during the flight. In this mode, the LED
flickers rapidly. When the rocket lands, and the pressure
stabilizes, the micro-controller will record the minimum
pressure pressure experienced during the flight, compute the
height represented by the difference in air pressure and
blink that value out on the LED. After that, MicroPeak
powers down to conserve battery power.</p>
</dd>
<dt class="hdlist1">Recover the data</dt>
<dd>
<p>Turn MicroPeak off and then back on. MicroPeak will blink
out the maximum height for the last flight. Turn MicroPeak
back off to conserve battery power.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_micropeak_usb_adapter">2. The MicroPeak USB adapter</h2>
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="MicroPeakUSB-2.0.jpg" alt="MicroPeakUSB 2.0" width="430">
</div>
<div class="title">Figure 2. MicroPeak USB Adapter</div>
</div>
<div class="paragraph">
<p>MicroPeak stores barometric pressure information for the first
48 seconds of the flight in on-board non-volatile memory. The
contents of this memory can be downloaded to a computer using
the MicroPeak USB adapter.</p>
</div>
<div class="sect2">
<h3 id="_installing_the_micropeak_software">2.1. Installing the MicroPeak software</h3>
<div class="paragraph">
<p>The MicroPeak application runs on Linux, Mac OS X and
Windows. You can download the latest version from
<a href="http://altusmetrum.org/MicroPeak" class="bare">http://altusmetrum.org/MicroPeak</a></p>
</div>
<div class="paragraph">
<p>On Mac OS X and Windows, the FTDI USB device driver
needs to be installed. A compatible version of this
driver is included with the MicroPeak application, but
you may want to download a newer version from
<a href="http://www.ftdichip.com/FTDrivers.htm" class="bare">http://www.ftdichip.com/FTDrivers.htm</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_downloading_micro_peak_data">2.2. Downloading Micro Peak data</h3>
<div class="ulist">
<ul>
<li>
<p>Plug the MicroPeak USB adapter in to your computer.</p>
</li>
<li>
<p>Start the MicroPeak application.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-nofont.svg" alt="micropeak nofont" width="50">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Click on the Download button at the top of the
window.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-app.png" alt="micropeak app" width="430">
</div>
<div class="title">Figure 3. MicroPeak Application</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select from the listed devices. There will probably
be only one.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-device-dialog.png" alt="micropeak device dialog" width="220">
</div>
<div class="title">Figure 4. MicroPeak Device Dialog</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The application will now wait until it receives
valid data from the MicroPeak USB adapter.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-download.png" alt="micropeak download" width="200">
</div>
<div class="title">Figure 5. MicroPeak Download Dialog</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The MicroPeak USB adapter has a small
phototransistor under the hole in the center of the
box.  Locate this, turn on the MicroPeak and place
the orange LED on the MicroPeak directly inside the
hole, resting the MicroPeak itself on the box. You
should see the blue LED on the MicroPeak USB adapter
blinking in time with the orange LED on the
MicroPeak board itself.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="MicroPeakUSB-2.0-inuse.jpg" alt="MicroPeakUSB 2.0 inuse" width="430">
</div>
<div class="title">Figure 6. MicroPeak Downloading</div>
</div>
<div class="ulist">
<ul>
<li>
<p>After the maximum flight height is reported,
MicroPeak will pause for a few seconds, blink the
LED four times rapidly and then send the data in one
long blur on the LED. The MicroPeak application
should receive the data. When it does, it will
present the data in a graph and offer to save the
data to a file. If not, you can power cycle the
MicroPeak board and try again.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-save-dialog.png" alt="micropeak save dialog" width="220">
</div>
<div class="title">Figure 7. MicroPeak Save Dialog</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Once the data are saved, a graph will be displayed
with height, speed and acceleration values computed
from the recorded barometric pressure data. See
&lt;&lt;_analyzing_micropeak_data&gt; for more details on that.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_analyzing_micropeak_data">2.3. Analyzing MicroPeak Data</h3>
<div class="paragraph">
<p>The MicroPeak application can present flight data in
the form of a graph, a collection of computed
statistics or in tabular form.</p>
</div>
<div class="paragraph">
<p>MicroPeak collects raw barometric pressure data which
is then used to compute the remaining data. Altitude
is computed through a standard atmospheric
model. Absolute error in this data will be affected by
local atmospheric conditions. Fortunately, these
errors tend to mostly cancel out, so the error in the
height computation is much smaller than the error in
altitude would be.</p>
</div>
<div class="paragraph">
<p>Speed and acceleration are computed by first smoothing
the height data with a Gaussian window averaging
filter. For speed data, this average uses seven
samples. For acceleration data, eleven samples are
used. These were chosen to provide reasonably smooth
speed and acceleration data, which would otherwise be
swamped with noise.</p>
</div>
<div class="paragraph">
<p>The File menu has operations to open existing flight
logs, Download new data from MicroPeak, Save a copy of
the flight log to a new file, Export the tabular data
(as seen in the Raw Data tab) to a file, change the
application Preferences, Close the current window or
close all windows and Exit the application.</p>
</div>
<div class="sect3">
<h4 id="_micropeak_graphs">2.3.1. MicroPeak Graphs</h4>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-graph.png" alt="micropeak graph" width="430">
</div>
<div class="title">Figure 8. MicroPeak Graph</div>
</div>
<div class="paragraph">
<p>Under the Graph tab, the height, speed and acceleration values
are displayed together. You can zoom in on the graph by
clicking and dragging to sweep out an area of
interest. Right-click on the plot to bring up a menu that will
let you save, copy or print the graph.</p>
</div>
</div>
<div class="sect3">
<h4 id="_micropeak_flight_statistics">2.3.2. MicroPeak Flight Statistics</h4>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-statistics.png" alt="micropeak statistics" width="430">
</div>
<div class="title">Figure 9. MicroPeak Flight Statistics</div>
</div>
<div class="paragraph">
<p>The Statistics tab presents overall data from
the flight. Note that the Maximum height value
is taken from the minumum pressure captured in
flight, and may be different from the apparant
apogee value as the on-board data are sampled
twice as fast as the recorded values, or
because the true apogee occurred after the
on-board memory was full. Each value is
presented in several units as appropriate.</p>
</div>
</div>
<div class="sect3">
<h4 id="_raw_flight_data">2.3.3. Raw Flight Data</h4>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-raw-data.png" alt="micropeak raw data" width="430">
</div>
<div class="title">Figure 10. MicroPeak Raw Flight Data</div>
</div>
<div class="paragraph">
<p>A table consisting of the both the raw barometric pressure
data and values computed from that for each recorded time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_the_graph">2.3.4. Configuring the Graph</h4>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-graph-configure.png" alt="micropeak graph configure" width="430">
</div>
<div class="title">Figure 11. MicroPeak Graph Configuration</div>
</div>
<div class="paragraph">
<p>This selects which graph elements to show, and lets you
switch between metric and imperial units</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setting_micropeak_preferences">2.4. Setting MicroPeak Preferences</h3>
<div class="imageblock text-center">
<div class="content">
<img src="micropeak-preferences.png" alt="micropeak preferences" width="170">
</div>
<div class="title">Figure 12. MicroPeak Preferences</div>
</div>
<div class="paragraph">
<p>The MicroPeak application has a few user settings which are
configured through the Preferences dialog, which can be
accessed from the File menu.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Log Directory</dt>
<dd>
<p>The Log Directory is where flight data will be
saved to and loaded from by default. Of
course, you can always navigate to other
directories in the file chooser windows, this
setting is just the starting point.</p>
</dd>
<dt class="hdlist1">Imperial Units</dt>
<dd>
<p>If you prefer to see your graph data in feet
and miles per hour instead of meters and
meters per second, you can select Imperial
Units.</p>
</dd>
<dt class="hdlist1">Serial Debug</dt>
<dd>
<p>To see what data is actually arriving over the
serial port, start the MicroPeak application
from a command prompt and select the Serial
Debug option. This can be useful in debugging
serial communication problems, but most people
need never choose this.</p>
</dd>
<dt class="hdlist1">Font Size</dt>
<dd>
<p>You can adjust the size of the text in the
Statistics tab by changing the Font size
preference. There are three settings, with
luck one will both fit on your screen and
provide readable values.</p>
</dd>
<dt class="hdlist1">Look &amp; Feel</dt>
<dd>
<p>The Look &amp; feel menu shows a list of available
application appearance choices. By default,
the MicroPeak application tries to blend in
with other applications, but you may choose
some other appearance if you like.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that MicroPeak shares a subset of the
AltosUI preferences, so if you use both of
these applications, change in one application
will affect the other.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_precautions">Appendix A: Handling Precautions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Altus Metrum products are sophisticated electronic
devices.  When handled gently and properly installed in an
air-frame, they will deliver impressive results.  However, as
with all electronic devices, there are some precautions you
must take.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
The CR1025 Lithium batteries have an extraordinary power
density.  This is great because we can fly with much less
battery mass&#8230;&#8203; but if they are punctured or their contacts
are allowed to short, they can and will release their energy
very rapidly!  Thus we recommend that you take some care when
handling MicroPeak to keep conductive material from coming in
contact with the exposed metal elements.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The barometric sensor used in MicroPeak is sensitive to
sunlight. Please consider this when designing an
installation. Many model rockets with payload bays use clear
plastic for the payload bay. Replacing these with an opaque
cardboard tube, painting them, or wrapping them with a layer
of masking tape are all reasonable approaches to keep the
sensor out of direct sunlight.</p>
</div>
<div class="paragraph">
<p>The barometric sensor sampling ports must be able to
"breathe", both by not being covered by foam or tape or other
materials that might directly block the hole on the top of the
sensor, and also by having a suitable static vent to outside
air.</p>
</div>
<div class="paragraph">
<p>As with all other rocketry electronics, Altus Metrum
altimeters must be protected from exposure to corrosive motor
exhaust and ejection charge gasses.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_technical_information">Appendix B: Technical Information</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_barometric_sensor">B.1. Barometric Sensor</h3>
<div class="paragraph">
<p>MicroPeak uses the Measurement Specialties MS5607
sensor. This has a range of 120kPa to 1kPa with an
absolute accuracy of 150Pa and a resolution of 2.4Pa.</p>
</div>
<div class="paragraph">
<p>The pressure range corresponds roughly to an altitude
range of -1500m (-4900 feet) to 31000m (102000 feet),
while the resolution is approximately 20cm (8 inches)
near sea level and 60cm (24in) at 10000m (33000 feet).</p>
</div>
<div class="paragraph">
<p>Ground pressure is computed from an average of 16
samples, taken while the altimeter is at rest. The
flight pressure used to report maximum height is
computed from a Kalman filter designed to smooth out
any minor noise in the sensor values. The flight
pressure recorded to non-volatile storage is
unfiltered, coming directly from the pressure sensor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_micro_controller">B.2. Micro-controller</h3>
<div class="paragraph">
<p>MicroPeak uses an Atmel ATtiny85
micro-controller. This tiny CPU contains 8kB of flash
for the application, 512B of RAM for temporary data
storage and 512B of EEPROM for non-volatile storage of
previous flight data.</p>
</div>
<div class="paragraph">
<p>The ATtiny85 has a low-power mode which turns off all
of the clocks and powers down most of the internal
components. In this mode, the chip consumes only .1μA
of power. MicroPeak uses this mode once the flight has
ended to preserve battery power.</p>
</div>
</div>
<div class="sect2">
<h3 id="_lithium_battery">B.3. Lithium Battery</h3>
<div class="paragraph">
<p>The CR1025 battery used by MicroPeak holds 30mAh of
power, which is sufficient to run for over 40
hours. Because MicroPeak powers down on landing, run
time includes only time sitting on the launch pad or
during flight.</p>
</div>
<div class="paragraph">
<p>The large positive terminal (+) is usually marked,
while the smaller negative terminal is not. Make sure
you install the battery with the positive terminal
facing away from the circuit board where it will be in
contact with the metal battery holder. A small pad on
the circuit board makes contact with the negative
battery terminal.</p>
</div>
<div class="paragraph">
<p>Shipping restrictions may prevent us from including a
CR1025 battery with MicroPeak. If so, many stores
carry CR1025 batteries as they are commonly used in
small electronic devices such as flash lights.</p>
</div>
</div>
<div class="sect2">
<h3 id="_atmospheric_model">B.4. Atmospheric Model</h3>
<div class="paragraph">
<p>MicroPeak contains a fixed atmospheric model which is
used to convert barometric pressure into altitude. The
model was converted into a 469-element piece-wise
linear approximation which is then used to compute the
altitude of the ground and apogee. The difference
between these represents the maximum height of the
flight.</p>
</div>
<div class="paragraph">
<p>The model assumes a particular set of atmospheric
conditions, which, while a reasonable average, cannot
represent the changing nature of the real
atmosphere. Fortunately, for flights reasonably close
to the ground, the effect of this global inaccuracy
are largely canceled out when the computed ground
altitude is subtracted from the computed apogee
altitude, so the resulting height is more accurate
than either the ground or apogee altitudes.</p>
</div>
<div class="paragraph">
<p>Because the raw pressure data is recorded to
non-volatile storage, you can use that, along with a
more sophisticated atmospheric model, to compute your
own altitude values.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mechanical_considerations">B.5. Mechanical Considerations</h3>
<div class="paragraph">
<p>MicroPeak is designed to be rugged enough for typical
rocketry applications. It contains two moving parts,
the battery holder and the power switch, which were
selected for their ruggedness.</p>
</div>
<div class="paragraph">
<p>The MicroPeak battery holder is designed to withstand
impact up to 150g without breaking contact (or, worse
yet, causing the battery to fall out). That means it
should stand up to almost any launch you care to try,
and should withstand fairly rough landings.</p>
</div>
<div class="paragraph">
<p>The power switch is designed to withstand up to 50g
forces in any direction. Because it is a sliding
switch, orienting the switch perpendicular to the
direction of rocket travel will serve to further
protect the switch from launch forces.</p>
</div>
</div>
<div class="sect2">
<h3 id="_micropeak_programming_interface">B.6. MicroPeak Programming Interface</h3>
<div class="paragraph">
<p>MicroPeak exposes a standard 6-pin AVR programming
interface, but not using the usual 2x3 array of pins
on 0.1" centers. Instead, there is a single row of
tiny 0.60mm × 0.85mm pads on 1.20mm centers exposed
near the edge of the circuit board. We couldn&#8217;t find
any connector that was small enough to include on the
circuit board.</p>
</div>
<div class="paragraph">
<p>In lieu of an actual connector, the easiest way to
connect to the bare pads is through a set of Pogo
pins. These spring-loaded contacts are designed to
connect in precisely this way. We&#8217;ve designed a
programming jig, the MicroPeak Pogo Pin board which
provides a standard AVR interface on one end and a
recessed slot for MicroPeak to align the board with
the Pogo Pins.</p>
</div>
<div class="paragraph">
<p>The MicroPeak Pogo Pin board is not a complete AVR
programmer, it is an interface board that provides a
3.3V regulated power supply to run the MicroPeak via
USB and a standard 6-pin AVR programming interface
with the usual 2x3 grid of pins on 0.1" centers. This
can be connected to any AVR programming dongle.</p>
</div>
<div class="paragraph">
<p>The AVR programming interface cannot run faster than ¼
of the AVR CPU clock frequency. Because MicroPeak runs
at 250kHz to save power, you must configure your AVR
programming system to clock the AVR programming
interface at no faster than 62.5kHz, or a clock period
of 32µS.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_on_board_data_storage">Appendix C: On-board data storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ATtiny85 has 512 bytes of non-volatile storage, separate
from the code storage memory. The MicroPeak firmware uses this
to store information about the last completed
flight. Barometric measurements from the ground before launch
and at apogee are stored, and used at power-on to compute the
height of the last flight.</p>
</div>
<div class="paragraph">
<p>In addition to the data used to present the height of the last
flight, MicroPeak also stores barometric information sampled
at regular intervals during the flight. This is the
information captured with the MicroPeak USB adapter. It can
also be read from MicroPeak through any AVR programming tool.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. MicroPeak EEPROM Data Storage</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 70%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size (bytes)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average ground pressure (Pa)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x004</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum flight pressure (Pa)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x008</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of in-flight samples</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x00a … 0x1fe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Instantaneous flight pressure (Pa) low 16 bits</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All EEPROM data are stored least-significant byte first. The
instantaneous flight pressure data are stored without the
upper 16 bits of data. The upper bits can be reconstructed
from the previous sample, assuming that pressure doesn&#8217;t
change by more more than 32kPa in a single sample
interval. Note that this pressure data is <strong>not</strong> filtered in
any way, while both the recorded ground and apogee pressure
values are, so you shouldn&#8217;t expect the minimum instantaneous
pressure value to match the recorded minimum pressure value
exactly.</p>
</div>
<div class="paragraph">
<p>MicroPeak samples pressure every 96ms, but stores only every
other sample in the EEPROM. This provides for 251 pressure
samples at 192ms intervals, or 48.192s of storage. The clock
used for these samples is a factory calibrated RC circuit
built into the ATtiny85 and is accurate only to within ±10% at
25°C. So, you can count on the pressure data being accurate,
but speed or acceleration data computed from this will be
limited by the accuracy of this clock.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v1.9<br>
Last updated 2019-02-21 16:40:42 -0700
</div>
</div>
</body>
</html>